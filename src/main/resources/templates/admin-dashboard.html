<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LankaRail â€” Admin Dashboard</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <link rel="stylesheet" href="/css/styles.css">

</head>
<body>
<div class="dashboard-container">

  <aside class="sidebar">
    <div class="sidebar-header">
      <img src="/images/logo.png" alt="LankaRail" class="logo-img me-2">
      <span class="brand-text">LankaRail Admin</span>
    </div>
    <ul class="sidebar-nav">
      <li><a href="/admin/dashboard" class="active"><i class="fas fa-tachometer-alt fa-fw me-2"></i>Dashboard</a></li>
      <li><a href="#" onclick="loadTrains()"><i class="fas fa-train fa-fw me-2"></i>Manage Trains</a></li>
      <li><a href="#" onclick="loadSchedules()"><i class="fas fa-calendar-alt fa-fw me-2"></i>Manage Schedules</a></li>
      <li><a href="#" onclick="loadStations()"><i class="fas fa-building fa-fw me-2"></i>Manage Stations</a></li>
      <li><a href="#" onclick="loadBookings()"><i class="fas fa-ticket-alt fa-fw me-2"></i>View Bookings</a></li>
      <li><a href="#" onclick="loadUsers()"><i class="fas fa-users fa-fw me-2"></i>Manage Users</a></li>
    </ul>
    <div class="sidebar-footer">
      <span id="adminInfo" class="text-white small"></span>
      <button id="logoutBtn" class="btn btn-sm btn-outline-danger mt-2 w-100">Logout</button>
    </div>
  </aside>

  <main class="main-content">
    <h2 class="mb-4">Admin Dashboard</h2>

    <div class="row g-4 mb-4">
      <div class="col-lg-3 col-md-6">
        <div class="stat-card">
          <h5>Total Trains</h5>
          <p class="stat-number" id="statTotalTrains">0</p> <i class="fas fa-train card-icon"></i>
        </div>
      </div>
      <div class="col-lg-3 col-md-6">
        <div class="stat-card">
          <h5>Active Schedules</h5>
          <p class="stat-number" id="statActiveSchedules">0</p> <i class="fas fa-calendar-check card-icon"></i>
        </div>
      </div>
      <div class="col-lg-3 col-md-6">
        <div class="stat-card">
          <h5>Pending Bookings</h5>
          <p class="stat-number" id="statPendingBookings">0</p> <i class="fas fa-clock card-icon"></i>
        </div>
      </div>
      <div class="col-lg-3 col-md-6">
        <div class="stat-card">
          <h5>Registered Users</h5>
          <p class="stat-number" id="statRegisteredUsers">0</p> <i class="fas fa-user-plus card-icon"></i>
        </div>
      </div>
    </div>

    <div id="adminContent" class="glass-card p-4 animate-fade-in w-100">
      <div class="text-muted">Welcome to the LankaRail Admin Panel. Select a module from the sidebar to begin.</div>
    </div>
  </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/admin-dashboard.js"></script>
<div class="modal fade" id="addTrainModal" tabindex="-1" aria-labelledby="addTrainModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header border-secondary">
        <h5 class="modal-title" id="addTrainModalLabel">Add New Train</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="addTrainForm">
          <div class="mb-3">
            <label for="trainName" class="form-label">Train Name</label>
            <input type="text" class="form-control" id="trainName" required placeholder="e.g., Udarata Menike">
          </div>
          <div class="mb-3">
            <label for="trainType" class="form-label">Type</label>
            <input type="text" class="form-control" id="trainType" required placeholder="e.g., InterCity or Local">
          </div>
          <div class="mb-3">
            <label for="trainCapacity" class="form-label">Capacity</label>
            <input type="number" class="form-control" id="trainCapacity" required placeholder="e.g., 250">
          </div>
        </form>
      </div>
      <div class="modal-footer border-secondary">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" form="addTrainForm" class="btn btn-success">Save Train</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="addScheduleModal" tabindex="-1" aria-labelledby="addScheduleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header border-secondary">
        <h5 class="modal-title" id="addScheduleModalLabel">Add New Schedule</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="addScheduleForm">
          <div class="mb-3">
            <label for="scheduleTrainId" class="form-label">Select Train</label>
            <select class="form-select" id="scheduleTrainId" required>
              <option value="" selected disabled>Loading trains...</option>
            </select>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="scheduleDepartureStation" class="form-label">Departure Station</label>
              <input type="text" class="form-control" id="scheduleDepartureStation" required placeholder="e.g., Colombo Fort">
            </div>
            <div class="col-md-6 mb-3">
              <label for="scheduleArrivalStation" class="form-label">Arrival Station</label>
              <input type="text" class="form-control" id="scheduleArrivalStation" required placeholder="e.g., Kandy">
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="scheduleDepartureTime" class="form-label">Departure Time</label>
              <input type="datetime-local" class="form-control" id="scheduleDepartureTime" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="scheduleArrivalTime" class="form-label">Arrival Time</label>
              <input type="datetime-local" class="form-control" id="scheduleArrivalTime" required>
            </div>
          </div>
          <div class="mb-3">
            <label for="schedulePrice" class="form-label">Ticket Price (LKR)</label>
            <input type="number" step="0.01" class="form-control" id="schedulePrice" required placeholder="e.g., 1200.00">
          </div>
        </form>
      </div>
      <div class="modal-footer border-secondary">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" form="addScheduleForm" class="btn btn-success">Save Schedule</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="editScheduleModal" tabindex="-1" aria-labelledby="editScheduleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header border-secondary">
        <h5 class="modal-title" id="editScheduleModalLabel">Edit Schedule</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="editScheduleForm">
          <div class="mb-3">
            <label for="editScheduleTrainId" class="form-label">Select Train</label>
            <select class="form-select" id="editScheduleTrainId" required></select>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="editScheduleDepartureStation" class="form-label">Departure Station</label>
              <input type="text" class="form-control" id="editScheduleDepartureStation" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="editScheduleArrivalStation" class="form-label">Arrival Station</label>
              <input type="text" class="form-control" id="editScheduleArrivalStation" required>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="editScheduleDepartureTime" class="form-label">Departure Time</label>
              <input type="datetime-local" class="form-control" id="editScheduleDepartureTime" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="editScheduleArrivalTime" class="form-label">Arrival Time</label>
              <input type="datetime-local" class="form-control" id="editScheduleArrivalTime" required>
            </div>
          </div>
          <div class="mb-3">
            <label for="editSchedulePrice" class="form-label">Ticket Price (LKR)</label>
            <input type="number" step="0.01" class="form-control" id="editSchedulePrice" required>
          </div>
        </form>
      </div>
      <div class="modal-footer border-secondary">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" form="editScheduleForm" class="btn btn-primary">Save Changes</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="editTrainModal" tabindex="-1" aria-labelledby="editTrainModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header border-secondary">
        <h5 class="modal-title" id="editTrainModalLabel">Edit Train</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="editTrainForm">
          <div class="mb-3">
            <label for="editTrainName" class="form-label">Train Name</label>
            <input type="text" class="form-control" id="editTrainName" required>
          </div>
          <div class="mb-3">
            <label for="editTrainType" class="form-label">Type</label>
            <input type="text" class="form-control" id="editTrainType" required>
          </div>
          <div class="mb-3">
            <label for="editTrainCapacity" class="form-label">Capacity</label>
            <input type="number" class="form-control" id="editTrainCapacity" required>
          </div>
        </form>
      </div>
      <div class="modal-footer border-secondary">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" form="editTrainForm" class="btn btn-primary">Save Changes</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="addStationModal" tabindex="-1" aria-labelledby="addStationModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header border-secondary">
        <h5 class="modal-title" id="addStationModalLabel">Add New Station</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="addStationForm">
          <div class="mb-3">
            <label for="stationName" class="form-label">Station Name</label>
            <input type="text" class="form-control" id="stationName" required placeholder="e.g., Colombo Fort">
          </div>
          <div class="mb-3">
            <label for="stationCity" class="form-label">City</label>
            <input type="text" class="form-control" id="stationCity" required placeholder="e.g., Colombo">
          </div>
        </form>
      </div>
      <div class="modal-footer border-secondary">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" form="addStationForm" class="btn btn-success">Save Station</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="editStationModal" tabindex="-1" aria-labelledby="editStationModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header border-secondary">
        <h5 class="modal-title" id="editStationModalLabel">Edit Station</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="editStationForm">
          <div class="mb-3">
            <label for="editStationName" class="form-label">Station Name</label>
            <input type="text" class="form-control" id="editStationName" required>
          </div>
          <div class="mb-3">
            <label for="editStationCity" class="form-label">City</label>
            <input type="text" class="form-control" id="editStationCity" required>
          </div>
        </form>
      </div>
      <div class="modal-footer border-secondary">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" form="editStationForm" class="btn btn-primary">Save Changes</button>
      </div>
    </div>
  </div>
</div>
</body>
</html>
